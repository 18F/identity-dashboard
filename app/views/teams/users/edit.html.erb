<% content_for(:title, 'Edit team member') %>
<h1 class="usa-display">
  Edit user
  <% if @user.first_name && @user.last_name %>
    <%= "#{@user.first_name} #{@user.last_name} (#{@user.email})" %>
  <% else %>
    <%= @user.email %>
  <% end %>
</h1>

<%= simple_form_for(@team_membership, url: team_user_path(@team_membership.team, @user), html: { autocomplete: 'off' }) do |form| %>
  <%= form.error_notification %>
  <fieldset class="usa-fieldset margin-y-3">
    <% if IdentityConfig.store.prod_like_env && @remove_partner_admin %>
      <p>In order to give <strong><%=
        t('role_names.production.partner_admin')
      %></strong> role, you must first connect with <%= link_to "Airtable", @oauth_url, class: "usa-link" %> with OAuth.</p>
    <% end %>
    <legend><p id='rbac_description'><%= t('team_memberships.rbac_description') %></p></legend>
    <%= render(RadioCollectionComponent.new(
      form: form,
      model_method: :role_name,
      describedby: 'rbac_description',
      inputs: roles_for_options,
      default: @team_membership.role&.name,
      disabled: false,
      additional_descriptions: true,
    )) %>
  </fieldset>
  <% if @needs_to_confirm_partner_admin %>
    <%= form.button :submit, 'Confirm Change', name: "confirm_partner_admin", :class => "usa-button float-left" %>
  <% else %>
    <%= form.button :submit, 'Update', :class => "usa-button float-left" %>
  <% end %>
  <%= link_to t('forms.buttons.cancel'), team_users_path(@team),
              class: 'usa-button usa-button--outline float-left' %>
<% end %>
