<h1>Manage users for <%= @team.name %></h1>

<div>
  <%= button_to "Add user",
    new_team_user_path(@team.id),
    method: :get,
    class: 'usa-button usa-button--outline'
  %>
</div>
<table class="usa-table">
  <thead>
    <tr>
      <th scope="col">Email</th>
      <th scope="col">Last Login</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @team.user_teams.each do |access| %>
    <%# TODO: can this become unneeded? %>
      <% next unless access.user %>
      <tr>
        <td><%= access.user.email %></td>
        <td><%= access.user.last_sign_in_at || "Never" %></td>
        <td>
          <% if show_delete_for access %>
            <%= link_to 'Delete', "#{team_user_path(@team.id, access.user.id)}/remove_confirm",
                        form_class: 'display-inline',
                        method: :get,
                        class: 'usa-button--unstyled usa-link margin-right-1' %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= link_to "Back", team_path(@team.id), class: 'usa-button usa-button--outline' %>
